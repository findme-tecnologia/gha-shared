name: 'Generate manifest file'
description: 'Adds a manifest file with the applications build information'
inputs:
  build_path:
    description: 'Folder generated by the application build'
    required: true
runs:
  using: composite
  steps:
    - name: Generate manifest file
      run: |
        VERSION=$(jq -r '.version' package.json)
        echo "{
          \"commit\": \"${{ github.sha }}\",
          \"version\": \"${VERSION}\"
        }" > ${{ inputs.build_path }}/manifest.json
      shell: bash